import * as discord from 'discord.js'
import * as api from './api.js'
import { compactDiscordUser } from './models/compactDiscordUser.js';
import { apiRequestHandler } from './apiRequestHandler.js';
import { email } from './models/email.js';
import * as aspnet from '@aspnet/signalr';

export class websiteBotService {

    private _serverBot:discord.Client
    private _config:api.IBotConfig

    constructor(serverBot:discord.Client, config:api.IBotConfig) {
        this._serverBot = serverBot;
        this._config = config;        
    }

    startupBot= ()=> {
        const connection = new aspnet.HubConnectionBuilder()
            .withUrl("http://dapperdino.azurewebsites.net/discordbothub")
            .configureLogging(aspnet.LogLevel.Information)
            .build();

        connection.start().catch(err => console.error(err.toString()));

        connection.on("RecieveMessage", (user, message) => {
            let test = user + " says " + message;
            console.log(test);
        });
    }
}